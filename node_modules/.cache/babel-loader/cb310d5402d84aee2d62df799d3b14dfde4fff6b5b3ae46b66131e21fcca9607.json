{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport config from \"../config.js\";\nimport { toast } from \"react-toastify\";\naxios.defaults.headers.common[\"authorization\"] = \"Bearer \" + localStorage.getItem(\"token\");\nexport const register = async (email, password) => {\n  try {\n    await axios.post(config.registerAdminUrl(), {\n      email: email,\n      password: password\n    });\n    toast.success(\"Registered\");\n  } catch (e) {\n    if (e.response && e.response.data) toast.error(e.response.data.message);else toast.error(\"Something went wrong.\");\n  }\n};\nexport const login = async (email, password) => {\n  let err = undefined;\n  try {\n    const x = await axios.post(config.loginAdminUrl(), {\n      email: email,\n      password: password\n    });\n    localStorage.setItem(\"token\", x.data.jwt);\n    console.log(\"LoggedIn\");\n  } catch (e) {\n    err = e;\n  }\n  return err;\n};\nexport const logout = async () => {\n  localStorage.removeItem(\"token\");\n};\nexport const isAuthorised = () => {\n  if (!localStorage.getItem(\"token\")) return false;\n  let exp = jwtDecode(localStorage.getItem(\"token\")).exp;\n  if (!exp || exp * 1000 < Date.now()) {\n    localStorage.removeItem(\"token\");\n    return false;\n  }\n  return true;\n};","map":{"version":3,"names":["axios","jwtDecode","config","toast","defaults","headers","common","localStorage","getItem","register","email","password","post","registerAdminUrl","success","e","response","data","error","message","login","err","undefined","x","loginAdminUrl","setItem","jwt","console","log","logout","removeItem","isAuthorised","exp","Date","now"],"sources":["C:/Users/chait/OneDrive/Desktop/cfunding/crowd_funding_platform_frontend/src/services/auth.js"],"sourcesContent":["import axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport config from \"../config.js\";\r\nimport { toast } from \"react-toastify\";\r\n\r\naxios.defaults.headers.common[\"authorization\"] =\r\n  \"Bearer \" + localStorage.getItem(\"token\");\r\n\r\nexport const register = async (email, password) => {\r\n  try {\r\n    await axios.post(config.registerAdminUrl(), {\r\n      email: email,\r\n      password: password,\r\n    });\r\n    toast.success(\"Registered\");\r\n  } catch (e) {\r\n    if (e.response && e.response.data) toast.error(e.response.data.message);\r\n    else toast.error(\"Something went wrong.\");\r\n  }\r\n};\r\n\r\nexport const login = async (email, password) => {\r\n  let err = undefined;\r\n  try {\r\n    const x = await axios.post(config.loginAdminUrl(), {\r\n      email: email,\r\n      password: password,\r\n    });\r\n\r\n    localStorage.setItem(\"token\", x.data.jwt);\r\n    console.log(\"LoggedIn\");\r\n  } catch (e) {\r\n    err = e;\r\n  }\r\n  return err;\r\n};\r\n\r\nexport const logout = async () => {\r\n  localStorage.removeItem(\"token\");\r\n};\r\n\r\nexport const isAuthorised = () => {\r\n  if (!localStorage.getItem(\"token\")) return false;\r\n  let exp = jwtDecode(localStorage.getItem(\"token\")).exp;\r\n  if (!exp || exp * 1000 < Date.now()) {\r\n    localStorage.removeItem(\"token\");\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,MAAM,MAAM,cAAc;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AAEtCH,KAAK,CAACI,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAC5C,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AAE3C,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EACjD,IAAI;IACF,MAAMX,KAAK,CAACY,IAAI,CAACV,MAAM,CAACW,gBAAgB,CAAC,CAAC,EAAE;MAC1CH,KAAK,EAAEA,KAAK;MACZC,QAAQ,EAAEA;IACZ,CAAC,CAAC;IACFR,KAAK,CAACW,OAAO,CAAC,YAAY,CAAC;EAC7B,CAAC,CAAC,OAAOC,CAAC,EAAE;IACV,IAAIA,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,IAAI,EAAEd,KAAK,CAACe,KAAK,CAACH,CAAC,CAACC,QAAQ,CAACC,IAAI,CAACE,OAAO,CAAC,CAAC,KACnEhB,KAAK,CAACe,KAAK,CAAC,uBAAuB,CAAC;EAC3C;AACF,CAAC;AAED,OAAO,MAAME,KAAK,GAAG,MAAAA,CAAOV,KAAK,EAAEC,QAAQ,KAAK;EAC9C,IAAIU,GAAG,GAAGC,SAAS;EACnB,IAAI;IACF,MAAMC,CAAC,GAAG,MAAMvB,KAAK,CAACY,IAAI,CAACV,MAAM,CAACsB,aAAa,CAAC,CAAC,EAAE;MACjDd,KAAK,EAAEA,KAAK;MACZC,QAAQ,EAAEA;IACZ,CAAC,CAAC;IAEFJ,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAEF,CAAC,CAACN,IAAI,CAACS,GAAG,CAAC;IACzCC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;EACzB,CAAC,CAAC,OAAOb,CAAC,EAAE;IACVM,GAAG,GAAGN,CAAC;EACT;EACA,OAAOM,GAAG;AACZ,CAAC;AAED,OAAO,MAAMQ,MAAM,GAAG,MAAAA,CAAA,KAAY;EAChCtB,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC;AAClC,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAChC,IAAI,CAACxB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAE,OAAO,KAAK;EAChD,IAAIwB,GAAG,GAAG/B,SAAS,CAACM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAACwB,GAAG;EACtD,IAAI,CAACA,GAAG,IAAIA,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;IACnC3B,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC;IAChC,OAAO,KAAK;EACd;EACA,OAAO,IAAI;AACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}